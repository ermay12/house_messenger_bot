<!DOCTYPE html>
<html>
  <body>
    <h1>Sake Jr. House Bot</h1>
    <h2>Subscribe to Sake</h2>
    <form action="/subscribe" method="post">
      Name of Bot Feature:<br />
      <input type="text" name="name" />
      <br />
      Author's Name:<br />
      <input type="text" name="owner" />
      <br />
      Conversation to Subscribe to:<br />
      <select name="threadID">
        <% threads.forEach((thread) => { %>
        <option value="<%=thread.id %>"><%=thread.name %></option>
        <%})%>
      </select>
      <br />
      Trigger Word:<br />
      <input type="text" name="trigger" />
      <br />
      Subscriber Address:<br />
      <input type="text" name="address" />
      <br />
      AWS API Key (optional):<br />
      <input type="text" name="apiKey" />
      <br />
      <br />
      <input type="submit" value="Submit" />
    </form>

    <h2>Subscriptions</h2>
    <% subscribers.forEach((subscriber) => { %>
    <form action="/delete" method="post">
      <input type="hidden" name="name" value="<%=subscriber.name %>" />
      <%=threads.find((thread)=>thread.id===subscriber.threadID ).name %>
      <input type="submit" value="X" />
    </form>
    <p>"<%=JSON.stringify(subscriber) %></p>
    <br />
    <%})%>
  </body>

  <h2>Send a message directly to Sake</h2>
  <form action="/message" method="post" target="_blank">
    Message:<br />
    <input type="text" name="message" />
    <br />
    Conversation to send to:<br />
    <select name="threadID">
      <% threads.forEach((thread) => { %>
      <option value="<%=thread.id %>"><%=thread.name %></option>
      <%})%>
    </select>
    <input type="submit" value="Submit" />
  </form>
</html>
